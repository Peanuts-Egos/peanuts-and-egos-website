<!-- Load Tailwind CSS and Inter font --><script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
  :root {
    /* Custom Color Palette (Adapted for Light Mode) */
    --color-dark: #010101; /* Black (Text/Foreground) */
    --color-content-bg: #f5f5f5; /* Light Gray (Card/Section Background) */
    --color-light: #ffffff; /* White (Primary Background) */
    --color-primary-accent: #ee0e21; /* Bright Red (Main Highlight/Links) */
    --color-secondary-accent: #e39640; /* Copper/Orange (CTA/Buttons) */
    --color-gray: #5e5e5e; /* Darker Neutral Gray (Subtle text/lines) */
  }
  body {
    font-family: 'Inter', sans-serif;
    /* Inverted: White background */
    background-color: var(--color-light); 
    /* Inverted: Dark text */
    color: var(--color-dark); 
  }
  .content-card {
    /* Subtle hover effect for content cards */
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .content-card:hover {
    transform: translateY(-4px);
    /* Adjusted shadow for light mode */
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); 
  }
</style>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<div id="app" class="min-h-screen flex flex-col">

  <!-- Header/Navigation: Sticky at the top --><header class="bg-[var(--color-content-bg)] shadow-xl sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
      <h1 class="text-3xl font-extrabold text-[var(--color-dark)] tracking-tight">
        <span class="text-[var(--color-primary-accent)]">P&E</span>
        <span class="hidden sm:inline"> | Peanuts & Egos</span>
      </h1>
      <nav class="space-x-4">
        <a href="#book-info" class="text-[var(--color-dark)] hover:text-[var(--color-primary-accent)] transition duration-150 text-sm sm:text-base">The Guide</a>
        <a href="#youtube-feed" class="text-[var(--color-dark)] hover:text-[var(--color-primary-accent)] transition duration-150 text-sm sm:text-base">YouTube</a>
        <a href="#substack-feed" class="text-[var(--color-dark)] hover:text-[var(--color-primary-accent)] transition duration-150 text-sm sm:text-base">Substack</a>
        <a href="https://www.amazon.com/dp/B0FK48685T" target="_blank" class="bg-[var(--color-secondary-accent)] text-[var(--color-dark)] px-3 py-1.5 rounded-full text-sm font-semibold hover:opacity-90 transition duration-150">Buy Book 1</a>
      </nav>
    </div>
  </header>

  <!-- Hero Section / Book CTA (Promoting the new concept) --><section id="book-info" class="bg-[var(--color-content-bg)] py-16 md:py-24 border-b border-[var(--color-primary-accent)]/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col lg:flex-row items-center gap-12">
      <!-- ACTUAL IMAGE for Book 2 Cover --><div class="w-60 h-90 flex-shrink-0 rounded-lg shadow-2xl overflow-hidden">
        <img src="https://i.ibb.co/L5tN0y2/Peanuts-Egos-Munich-Cover.jpg" alt="Peanuts & Egos Munich Book Cover" class="w-full h-full object-cover">
      </div>

      <!-- Text Content --><div class="lg:max-w-3xl text-center lg:text-left">
        <p class="text-[var(--color-primary-accent)] font-semibold uppercase tracking-widest text-sm mb-2">Book Two Announcement</p>
        <h2 class="text-5xl md:text-6xl font-extrabold text-[var(--color-dark)] mb-4 leading-tight">
          A Guide: American Football in the German Club System
        </h2>
        <p class="text-xl text-[var(--color-gray)] mb-8">
          Challenges, chances, and cheering. The book goes deep into the Vereinsführung (Club Leadership) of the Munich Cowboys, explained by the German Club President and his former American Head Coach.
        </p>
        <a href="#" class="inline-block bg-[var(--color-secondary-accent)] text-[var(--color-dark)] font-bold text-lg px-8 py-3 rounded-xl shadow-lg hover:opacity-90 transform hover:scale-105 transition duration-300">
          Pre-Order Now (Coming Soon)
        </a>
      </div>
    </div>
  </section>

  <!-- Main Content Area: YouTube and Substack Feeds (Desktop: 2/3 and 1/3 layout) --><main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 grid grid-cols-1 lg:grid-cols-3 gap-8">

    <!-- YouTube Feed --><section id="youtube-feed" class="lg:col-span-2">
      <h3 class="text-4xl font-bold mb-6 text-[var(--color-primary-accent)] border-b border-[var(--color-gray)] pb-2">Latest on YouTube</h3>
      <div id="youtube-list" class="space-y-6">
        <!-- YouTube content cards will be injected here by JavaScript --></div>
      <div class="mt-8 text-center">
        <!-- REAL YOUTUBE CHANNEL LINK --><a href="https://www.youtube.com/@peanutsandegos/videos" target="_blank" class="text-[var(--color-primary-accent)] hover:text-[var(--color-dark)] font-semibold border-b border-[var(--color-primary-accent)] transition duration-150">View All Videos &rarr;</a>
      </div>
    </section>

    <!-- Substack Feed --><section id="substack-feed" class="lg:col-span-1">
      <h3 class="text-4xl font-bold mb-6 text-[var(--color-primary-accent)] border-b border-[var(--color-gray)] pb-2">Exclusive Substack (Subscribe)</h3>
      
      <!-- Substack Subscribe Embed --><div class="flex justify-center bg-[var(--color-content-bg)] p-4 rounded-xl shadow-lg">
        <!-- Iframe attributes adjusted for responsive width (100% of container) --><iframe 
          src="https://peanutsandegos.substack.com/embed" 
          width="100%" 
          height="320" 
          style="border:1px solid #EEE; background:white;" 
          frameborder="0" 
          scrolling="no"
          class="max-w-md"
        ></iframe>
      </div>
      <p class="text-center text-[var(--color-gray)] text-sm mt-4">
        Sign up for exclusive content and podcast teasers!
      </p>
      <div class="mt-4 text-center">
        <!-- Direct link fallback --><a href="https://peanutsandegos.substack.com/" target="_blank" class="text-[var(--color-primary-accent)] hover:text-[var(--color-dark)] font-semibold border-b border-[var(--color-primary-accent)] transition duration-150">Visit Substack &rarr;</a>
      </div>
    </section>

  </main>

  <!-- Footer --><footer class="bg-[var(--color-content-bg)] border-t border-[var(--color-gray)] mt-12 py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-[var(--color-gray)]">
      <p>&copy; 2025 Peanuts & Egos. All rights reserved.</p>
      <div class="mt-2 space-x-4">
        <a href="#youtube-feed" class="hover:text-[var(--color-primary-accent)] text-[var(--color-gray)]">YouTube</a>
        <a href="#substack-feed" class="hover:text-[var(--color-primary-accent)] text-[var(--color-gray)]">Substack</a>
        <a href="mailto:contact@peanutsandegos.com" class="hover:text-[var(--color-primary-accent)] text-[var(--color-gray)]">Contact</a>
      </div>
    </div>
  </footer>

</div>

<script>
  // --- Video Utility Functions ---

  // Helper to convert ISO 8601 duration (PT#M#S) to MM:SS or HH:MM:SS
  function formatDuration(iso) {
      if (!iso) return 'N/A';
      const parts = iso.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);
      if (!parts) return 'N/A';
      const hours = parseInt(parts[1] || 0);
      const minutes = parseInt(parts[2] || 0);
      const seconds = parseInt(parts[3] || 0);

      let formatted = '';
      if (hours > 0) {
          formatted += hours + ':';
      }
      // Ensure minutes is padded with a leading zero if hours are present, or if it's the start (MM:SS)
      formatted += String(minutes).padStart(hours > 0 ? 2 : 1, '0') + ':' +
                    String(seconds).padStart(2, '0');
      return formatted;
  }

  // Helper to format date from YYYY-MM-DD to Month Day, YYYY
  function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
  }

  // --- Real Data from YouTube search for the 'peanutsandegos' channel ---
  const rawYouTubeVideos = [
    // Video 1: FROM THE TRENCHES: Longest and most substantial video
    { title: "FROM THE TRENCHES: What the Players Really Saw in Bielefeld", date: "2025-09-01", video_length: "PT28M11S", video_id: "0ETKnf67JIg" },
    // Video 2: Book Launch Announcement
    { title: "Peanuts & Egos book launch on October 9, 2025 #PeanutsAndEgos", date: "2025-04-19", video_length: "PT1M", video_id: "N4jDddxyVKw" },
    // Video 3: NFL's International Play Trailer
    { title: "NFL's International Play: Déjà Vu or a Winning Formula?", date: "2024-11-13", video_length: "PT56S", video_id: "8ryneHO8tGg" },
  ];

  const youtubeVideos = rawYouTubeVideos.map(video => ({
      title: video.title,
      date: formatDate(video.date),
      duration: formatDuration(video.video_length),
      // YouTube embed URL format is 'https://www.youtube.com/embed/[video_id]'
      embedUrl: `https://www.youtube.com/embed/${video.video_id}`
  }));

  // Removed mockSubstackArticles as the Substack content is now static (iframe)

  function renderContent() {
    const youtubeList = document.getElementById('youtube-list');
    // Note: substackList and related rendering code have been removed since the embed is now static HTML.

    // --- Render YouTube Videos (using real data) ---
    youtubeList.innerHTML = youtubeVideos.map(video => `
      <div class="content-card bg-[var(--color-content-bg)] p-4 rounded-xl shadow-lg flex flex-col md:flex-row gap-4 transition duration-300">
        <!-- Video Embed/Placeholder --><div class="w-full md:w-1/2 aspect-video bg-[var(--color-dark)] rounded-lg overflow-hidden flex items-center justify-center">
          <iframe 
            class="w-full h-full"
            src="${video.embedUrl}" 
            title="${video.title}" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>
        
        <!-- Video Details --><div class="md:w-1/2 flex flex-col justify-between">
          <div>
            <h4 class="text-xl font-semibold text-[var(--color-dark)] mb-2">${video.title}</h4>
            <p class="text-sm text-[var(--color-primary-accent)] font-medium">Duration: ${video.duration}</p>
          </div>
          <p class="text-sm text-[var(--color-gray)] mt-2 md:mt-0">Published: ${video.date}</p>
        </div>
      </div>
    `).join('');
  }

  // Ensure content is rendered after the page loads
  window.onload = function() {
    renderContent();
  };
</script>
